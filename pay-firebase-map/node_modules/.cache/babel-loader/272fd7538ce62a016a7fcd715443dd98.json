{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, createStaticVNode as _createStaticVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"row payment-form\"\n};\nconst _hoisted_2 = {\n  class: \"#e0e0e0 grey lighten-4\"\n};\n\nconst _hoisted_3 = /*#__PURE__*/_createTextVNode(\" Payment Method \");\n\nconst _hoisted_4 = {\n  class: \"right\"\n};\nconst _hoisted_5 = {\n  class: \"error red center-align white-text\"\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createStaticVNode(\"<div class=\\\"col s12 card-element\\\"><label>Card Number</label><div id=\\\"card-number-element\\\" class=\\\"input-value\\\"></div></div><div class=\\\"col s6 card-element\\\"><label>Expiry Date</label><div id=\\\"card-expiry-element\\\"></div></div><div class=\\\"col s6 card-element\\\"><label>CVC</label><div id=\\\"card-cvc-element\\\"></div></div>\", 3);\n\nconst _hoisted_9 = {\n  class: \"col s12 place-order-button-block\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"form\", null, [/*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"label\", null, \"Name\"), /*#__PURE__*/_createElementVNode(\"input\", {\n  class: \"my-input\"\n})]), /*#__PURE__*/_createElementVNode(\"div\", null, [/*#__PURE__*/_createElementVNode(\"label\", null, \"Card\"), /*#__PURE__*/_createCommentVNode(\" Using the same \\\"my-input\\\" class on the \"), /*#__PURE__*/_createCommentVNode(\" regular input above and on this container. \"), /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"my-input\",\n  id: \"card-element\"\n})])], -1\n/* HOISTED */\n);\n\nconst _hoisted_12 = /*#__PURE__*/_createElementVNode(\"br\", null, null, -1\n/* HOISTED */\n);\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"section\", _hoisted_1, [_createElementVNode(\"h5\", _hoisted_2, [_hoisted_3, _createElementVNode(\"span\", _hoisted_4, \"$\" + _toDisplayString($data.amount), 1\n  /* TEXT */\n  )]), _createElementVNode(\"div\", _hoisted_5, _toDisplayString($data.stripeValidationError), 1\n  /* TEXT */\n  ), _hoisted_6, _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"button\", {\n    class: \"btn col s12\",\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.placeOrderButtonPressed && $options.placeOrderButtonPressed(...args))\n  }, \"Place Order\")]), _hoisted_10, _hoisted_11, _hoisted_12]);\n}","map":{"version":3,"mappings":";;EACaA,KAAK,EAAC;;;EACPA,KAAK,EAAC;;;iDAAyB;;;EAEzBA,KAAK,EAAC;;;EAGXA,KAAK,EAAC;;;;;;EAkBNA,KAAK,EAAC;;;iCAGXC,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;iCACAA,oBAWO,MAXP,EAWO,IAXP,EAWO,cAVPA,oBAGM,KAHN,EAGM,IAHN,EAGM,cAFFA,oBAAmB,OAAnB,EAAmB,IAAnB,EAAO,MAAP,CAEE,eADFA,oBAAwB,OAAxB,EAAwB;EAAjBD,KAAK,EAAC;AAAW,CAAxB,CACE,CAHN,CAUO,eANPC,oBAKM,KALN,EAKM,IALN,EAKM,cAJFA,oBAAmB,OAAnB,EAAmB,IAAnB,EAAO,MAAP,CAIE,eAHFC,iEAGE,eAFFA,mEAEE,eADFD,oBAA8C,KAA9C,EAA8C;EAAzCD,KAAK,EAAC,UAAmC;EAAxBG,EAAE,EAAC;AAAqB,CAA9C,CACE,CALN,CAMO,CAXP;;AAAA;;iCAYAF,oBAAI,IAAJ,EAAI,IAAJ,EAAI,IAAJ,EAAI;AAAA;AAAJ;;;uBAxCJG,oBAyCU,SAzCV,cAyCU,CAxCNH,oBAGK,IAHL,cAGK,aADDA,oBAAsC,MAAtC,cAAoB,MAACI,iBAAEC,YAAF,CAArB,EAA6B;EAAA;EAA7B,CACC,CAHL,CAwCM,EAnCNL,oBACmC,KADnC,cACmCI,iBAA7BC,2BAA6B,CADnC,EAC2B;EAAA;EAD3B,CAmCM,EAhCNC,UAgCM,EAjBNN,oBAEM,KAFN,cAEM,CADFA,oBAAkF,QAAlF,EAAkF;IAA1ED,KAAK,EAAC,aAAoE;IAApDQ,OAAK,yCAAEC,6EAAF;EAA+C,CAAlF,EAA8D,aAA9D,CACE,CAFN,CAiBM,EAdNC,WAcM,EAbNC,WAaM,EADNC,WACM,CAzCV","names":["class","_createElementVNode","_createCommentVNode","id","_createElementBlock","_toDisplayString","$data","_hoisted_6","onClick","$options","_hoisted_10","_hoisted_11","_hoisted_12"],"sourceRoot":"","sources":["C:\\Users\\f7bpt3y\\Desktop\\Code folder\\RideGreen\\pay-firebase-map\\src\\views\\payment.vue"],"sourcesContent":["<template>\r\n    <section class=\"row payment-form\">\r\n        <h5 class=\"#e0e0e0 grey lighten-4\">\r\n            Payment Method\r\n            <span class=\"right\">${{amount}}</span>\r\n        </h5>\r\n\r\n        <div class=\"error red center-align white-text\">\r\n            {{stripeValidationError}}</div>\r\n\r\n        <div class=\"col s12 card-element\">\r\n            <label>Card Number</label>\r\n            <div id=\"card-number-element\" class=\"input-value\"></div>\r\n        </div>\r\n\r\n        <div class=\"col s6 card-element\">\r\n            <label>Expiry Date</label>\r\n            <div id=\"card-expiry-element\"></div>\r\n        </div>\r\n\r\n        <div class=\"col s6 card-element\">\r\n            <label>CVC</label>\r\n            <div id=\"card-cvc-element\"></div>\r\n        </div>\r\n\r\n        <div class=\"col s12 place-order-button-block\">\r\n            <button class=\"btn col s12 \" @click=\"placeOrderButtonPressed\">Place Order</button>\r\n        </div>\r\n        <br>\r\n        <form>\r\n        <div>\r\n            <label>Name</label>\r\n            <input class=\"my-input\">\r\n        </div>\r\n        <div>\r\n            <label>Card</label>\r\n            <!-- Using the same \"my-input\" class on the -->\r\n            <!-- regular input above and on this container. -->\r\n            <div class=\"my-input\" id=\"card-element\"></div>\r\n        </div>\r\n        </form>\r\n        <br>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\n//src='../components/payment.js'\r\nimport firebase from 'firebase'\r\nexport default {\r\n    data() {\r\n        return {\r\n            stripe: null,\r\n            cardNumberElement: null,\r\n            cardExpiryElement: null,\r\n            cardCVCElement: null,\r\n            stripeValidationError: \"\",\r\n            amount:25\r\n        };\r\n    },\r\n    mounted() {\r\n  this.stripe = Stripe(\"pk_test_51L0vEzDjx4QOpJ22C9T8lcYNss9g6viO1382VSv096t4MiZ7Y4CO5GguDHZf9LP0Hxm3VC92DHLNHX4WBX7BBEpt003irItIuf\");\r\n        this.createAndMountFormElements();\r\n    },\r\n    methods: {\r\n        createAndMountFormElements() {\r\n            var elements = this.stripe.elements();\r\n            this.cardNumberElement = elements.create(\"cardNumber\");\r\n            this.cardNumberElement.mount(\"#card-number-element\");\r\n\r\n            this.cardExpiryElement = elements.create(\"cardExpiry\");\r\n            this.cardExpiryElement.mount(\"#card-expiry-element\");\r\n            \r\n            this.cardCvcElement = elements.create(\"cardCvc\");\r\n            this.cardCvcElement.mount(\"#card-cvc-element\");\r\n            \r\n            this.cardNumberElement.on(\"change\", this.setValidationError);\r\n            this.cardExpiryElement.on(\"change\", this.setValidationError);\r\n            this.cardCvcElement.on(\"change\", this.setValidationError);\r\n        },\r\n        setValidationError(event) {\r\n            this.stripeValidationError = event.error ? event.error.message : \"\";\r\n        },\r\n        placeOrderButtonPressed() {\r\n            this.stripe.createToken(this.cardNumberElement).then(result => {\r\n                if (result.error) {\r\n                    this.stripeValidationError = result.error.message;\r\n                } else {\r\n                    var stripeObject = {\r\n                        amount: this.amount,\r\n                        source: result.token\r\n                    };\r\n                    this.saveDataToFireStore(stripeObject);\r\n                }\r\n            });\r\n        },\r\n        saveDataToFireStore(stripeObject) {\r\n            const db = firebase.firestore()\r\n            const chargesRef = db.collection(\"charges\")\r\n            const pushId = chargesRef.doc().id\r\n            db.collection(\"charges\").doc(pushId).set(stripeObject)\r\n            chargesRef.doc(pushId).onSnapshot(snapShot => {\r\n                const charge = snapShot.data();\r\n                if (charge.error) {\r\n                    alert(charge.error);\r\n                    chargesRef\r\n                    .doc(pushId)\r\n                    .delete();\r\n                    return;\r\n                }\r\n                if (charge.status && charge.status == \"succeeded\") {\r\n                    alert(charge.status);\r\n                }\r\n            })\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.payment-form {\r\n    max-width: 400px;\r\n    margin: 20px auto;\r\n    border: 1px solid #000000;\r\n}\r\n.payment-form h5 {\r\n    margin: 0;\r\n    padding: 10px;\r\n    font-size: 1.2rem;\r\n}\r\n.card-element {\r\n    margin-top: 5px;\r\n}\r\n#card-number-element,\r\n#card-expiry-element,\r\n#card-cvc-element {\r\n    background: white;\r\n    padding: 5px;\r\n    border: 1px solid #050505;\r\n    height: 30px;\r\n}\r\n.place-order-button-block {\r\n    margin: 10px 0;\r\n}\r\n.my-input {\r\n    padding: 10px;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n/*\r\n.my-input {\r\npadding: 10px;\r\nborder: 1px solid #ccc;\r\n}\r\n*/\r\n</style>\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}