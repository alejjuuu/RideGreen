{"ast":null,"code":"//src='../components/payment.js'\nimport firebase from 'firebase';\nexport default {\n  data() {\n    return {\n      stripe: null,\n      cardNumberElement: null,\n      cardExpiryElement: null,\n      cardCVCElement: null,\n      stripeValidationError: \"\",\n      amount: 25\n    };\n  },\n\n  mounted() {\n    this.stripe = Stripe(\"pk_test_51L0vEzDjx4QOpJ22C9T8lcYNss9g6viO1382VSv096t4MiZ7Y4CO5GguDHZf9LP0Hxm3VC92DHLNHX4WBX7BBEpt003irItIuf\");\n    this.createAndMountFormElements();\n  },\n\n  methods: {\n    createAndMountFormElements() {\n      var elements = this.stripe.elements();\n      this.cardNumberElement = elements.create(\"cardNumber\");\n      this.cardNumberElement.mount(\"#card-number-element\");\n      this.cardExpiryElement = elements.create(\"cardExpiry\");\n      this.cardExpiryElement.mount(\"#card-expiry-element\");\n      this.cardCvcElement = elements.create(\"cardCvc\");\n      this.cardCvcElement.mount(\"#card-cvc-element\");\n      this.cardNumberElement.on(\"change\", this.setValidationError);\n      this.cardExpiryElement.on(\"change\", this.setValidationError);\n      this.cardCvcElement.on(\"change\", this.setValidationError);\n    },\n\n    setValidationError(event) {\n      this.stripeValidationError = event.error ? event.error.message : \"\";\n    },\n\n    placeOrderButtonPressed() {\n      this.stripe.createToken(this.cardNumberElement).then(result => {\n        if (result.error) {\n          this.stripeValidationError = result.error.message;\n        } else {\n          var stripeObject = {\n            amount: this.amount,\n            source: result.token\n          };\n          this.saveDataToFireStore(stripeObject);\n        }\n      });\n    },\n\n    saveDataToFireStore(stripeObject) {\n      const db = firebase.firestore();\n      const chargesRef = db.collection(\"charges\");\n      const pushId = chargesRef.doc().id;\n      db.collection(\"charges\").doc(pushId).set(stripeObject);\n      chargesRef.doc(pushId).onSnapshot(snapShot => {\n        const charge = snapShot.data();\n\n        if (charge.error) {\n          alert(charge.error);\n          chargesRef.doc(pushId).delete();\n          return;\n        }\n\n        if (charge.status && charge.status == \"succeeded\") {\n          alert(charge.status);\n        }\n      });\n    }\n\n  }\n};","map":{"version":3,"mappings":"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","names":["firebase","data","stripe","cardNumberElement","cardExpiryElement","cardCVCElement","stripeValidationError","amount","mounted","Stripe","createAndMountFormElements","methods","elements","create","mount","cardCvcElement","on","setValidationError","event","error","message","placeOrderButtonPressed","createToken","then","result","stripeObject","source","token","saveDataToFireStore","db","firestore","chargesRef","collection","pushId","doc","id","set","onSnapshot","snapShot","charge","alert","delete","status"],"sourceRoot":"","sources":["C:\\Users\\f7bpt3y\\Desktop\\Code folder\\RideGreen\\pay-firebase-map\\src\\views\\payment.vue"],"sourcesContent":["<template>\r\n    <section class=\"row payment-form\">\r\n        <h5 class=\"#e0e0e0 grey lighten-4\">\r\n            Payment Method\r\n            <span class=\"right\">${{amount}}</span>\r\n        </h5>\r\n\r\n        <div class=\"error red center-align white-text\">\r\n            {{stripeValidationError}}</div>\r\n\r\n        <div class=\"col s12 card-element\">\r\n            <label>Card Number</label>\r\n            <div id=\"card-number-element\" class=\"input-value\"></div>\r\n        </div>\r\n\r\n        <div class=\"col s6 card-element\">\r\n            <label>Expiry Date</label>\r\n            <div id=\"card-expiry-element\"></div>\r\n        </div>\r\n\r\n        <div class=\"col s6 card-element\">\r\n            <label>CVC</label>\r\n            <div id=\"card-cvc-element\"></div>\r\n        </div>\r\n\r\n        <div class=\"col s12 place-order-button-block\">\r\n            <button class=\"btn col s12 \" @click=\"placeOrderButtonPressed\">Place Order</button>\r\n        </div>\r\n        <br>\r\n        <form>\r\n        <div>\r\n            <label>Name</label>\r\n            <input class=\"my-input\">\r\n        </div>\r\n        <div>\r\n            <label>Card</label>\r\n            <!-- Using the same \"my-input\" class on the -->\r\n            <!-- regular input above and on this container. -->\r\n            <div class=\"my-input\" id=\"card-element\"></div>\r\n        </div>\r\n        </form>\r\n        <br>\r\n    </section>\r\n</template>\r\n\r\n<script>\r\n//src='../components/payment.js'\r\nimport firebase from 'firebase'\r\nexport default {\r\n    data() {\r\n        return {\r\n            stripe: null,\r\n            cardNumberElement: null,\r\n            cardExpiryElement: null,\r\n            cardCVCElement: null,\r\n            stripeValidationError: \"\",\r\n            amount:25\r\n        };\r\n    },\r\n    mounted() {\r\n  this.stripe = Stripe(\"pk_test_51L0vEzDjx4QOpJ22C9T8lcYNss9g6viO1382VSv096t4MiZ7Y4CO5GguDHZf9LP0Hxm3VC92DHLNHX4WBX7BBEpt003irItIuf\");\r\n        this.createAndMountFormElements();\r\n    },\r\n    methods: {\r\n        createAndMountFormElements() {\r\n            var elements = this.stripe.elements();\r\n            this.cardNumberElement = elements.create(\"cardNumber\");\r\n            this.cardNumberElement.mount(\"#card-number-element\");\r\n\r\n            this.cardExpiryElement = elements.create(\"cardExpiry\");\r\n            this.cardExpiryElement.mount(\"#card-expiry-element\");\r\n            \r\n            this.cardCvcElement = elements.create(\"cardCvc\");\r\n            this.cardCvcElement.mount(\"#card-cvc-element\");\r\n            \r\n            this.cardNumberElement.on(\"change\", this.setValidationError);\r\n            this.cardExpiryElement.on(\"change\", this.setValidationError);\r\n            this.cardCvcElement.on(\"change\", this.setValidationError);\r\n        },\r\n        setValidationError(event) {\r\n            this.stripeValidationError = event.error ? event.error.message : \"\";\r\n        },\r\n        placeOrderButtonPressed() {\r\n            this.stripe.createToken(this.cardNumberElement).then(result => {\r\n                if (result.error) {\r\n                    this.stripeValidationError = result.error.message;\r\n                } else {\r\n                    var stripeObject = {\r\n                        amount: this.amount,\r\n                        source: result.token\r\n                    };\r\n                    this.saveDataToFireStore(stripeObject);\r\n                }\r\n            });\r\n        },\r\n        saveDataToFireStore(stripeObject) {\r\n            const db = firebase.firestore()\r\n            const chargesRef = db.collection(\"charges\")\r\n            const pushId = chargesRef.doc().id\r\n            db.collection(\"charges\").doc(pushId).set(stripeObject)\r\n            chargesRef.doc(pushId).onSnapshot(snapShot => {\r\n                const charge = snapShot.data();\r\n                if (charge.error) {\r\n                    alert(charge.error);\r\n                    chargesRef\r\n                    .doc(pushId)\r\n                    .delete();\r\n                    return;\r\n                }\r\n                if (charge.status && charge.status == \"succeeded\") {\r\n                    alert(charge.status);\r\n                }\r\n            })\r\n        }\r\n    }\r\n};\r\n</script>\r\n\r\n<style>\r\n.payment-form {\r\n    max-width: 400px;\r\n    margin: 20px auto;\r\n    border: 1px solid #000000;\r\n}\r\n.payment-form h5 {\r\n    margin: 0;\r\n    padding: 10px;\r\n    font-size: 1.2rem;\r\n}\r\n.card-element {\r\n    margin-top: 5px;\r\n}\r\n#card-number-element,\r\n#card-expiry-element,\r\n#card-cvc-element {\r\n    background: white;\r\n    padding: 5px;\r\n    border: 1px solid #050505;\r\n    height: 30px;\r\n}\r\n.place-order-button-block {\r\n    margin: 10px 0;\r\n}\r\n.my-input {\r\n    padding: 10px;\r\n    border: 1px solid #ccc;\r\n}\r\n\r\n/*\r\n.my-input {\r\npadding: 10px;\r\nborder: 1px solid #ccc;\r\n}\r\n*/\r\n</style>\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}